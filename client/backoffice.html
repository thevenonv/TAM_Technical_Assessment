<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Backoffice Refunds</title>
    <style>
      body{font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial; margin:0; background:#0b1220; color:#e5e7eb;}
      .wrap{max-width:1100px; margin:0 auto; padding:28px 16px 60px;}
      .top{display:flex; justify-content:space-between; align-items:center; gap:12px; padding:16px; border:1px solid rgba(255,255,255,.12); border-radius:16px; background:rgba(255,255,255,.04);}
      h1{margin:0; font-size:20px;}
      .sub{color:#aab1c2; margin-top:6px; font-size:13px;}
      button,input{padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(0,0,0,.2); color:#e5e7eb;}
      button{cursor:pointer; background:linear-gradient(135deg, #22c55e, rgba(34,197,94,.75)); border:0; color:#061018; font-weight:800;}
      button.secondary{background:rgba(255,255,255,.06); color:#e5e7eb; border:1px solid rgba(255,255,255,.12);}
      button.toggle{border-radius:10px; background:rgba(255,255,255,.08); color:#e5e7eb; border:1px solid rgba(255,255,255,.15);}
      button.toggle.active{background:linear-gradient(135deg, #22c55e, rgba(34,197,94,.7)); color:#061018; border-color:rgba(34,197,94,.6);}
      button.ghost{background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.16); color:#e5e7eb; padding:8px 10px; font-weight:600;}
      .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;}
      table{width:100%; border-collapse:collapse; margin-top:14px; border:1px solid rgba(255,255,255,.12); border-radius:14px; overflow:hidden;}
      th,td{padding:10px; border-bottom:1px solid rgba(255,255,255,.08); text-align:left; font-size:13px;}
      th{background:rgba(255,255,255,.06); color:#cbd5e1;}
      .pill{display:inline-block; padding:4px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.14); font-size:12px; color:#cbd5e1;}
      .ok{border-color:rgba(34,197,94,.4); background:rgba(34,197,94,.12); color:#bbf7d0;}
      .warn{border-color:rgba(245,158,11,.4); background:rgba(245,158,11,.12); color:#fde68a;}
      .danger{border-color:rgba(239,68,68,.4); background:rgba(239,68,68,.12); color:#fecaca;}
      .log{margin-top:14px; white-space:pre-wrap; background:rgba(0,0,0,.25); padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); font-size:12px; color:#d1d5db;}
      .small{color:#aab1c2; font-size:12px; margin-top:10px; line-height:1.4;}
      .amt{width:120px;}
    </style>
  </head>

  <body>
    <div class="wrap">
      <div class="top">
        <div>
          <h1>Backoffice Refunds (Phase 3)</h1>
          <div class="sub">Live via PayPal only: no local storage; refunds (full or partial) happen directly.</div>
        </div>
        <div class="row">
          <button id="refreshBtn" class="secondary">Refresh</button>
          <a href="index.html" style="text-decoration:none;"><button class="secondary">↩ Storefront</button></a>
        </div>
      </div>

      <div class="small">
        Tip: If you enabled Basic Auth on the server, your browser will ask credentials when loading this page’s requests.
      </div>

      <div class="row">
        <button id="filterSell" class="toggle active">Sales (positive)</button>
        <button id="filterRefunds" class="toggle">Refunds (negative)</button>
      </div>

      <table>
        <thead>
          <tr>
            <th>Order</th>
            <th>Capture ID</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Refund</th>
            <th>Actions</th>
            <th>Refund history</th>
          </tr>
        </thead>
        <tbody id="tbody">
          <tr><td colspan="7">Loading…</td></tr>
        </tbody>
      </table>

      <div class="log" id="log"></div>
    </div>

    <script src="backoffice.js"></script>
  </body>
</html>
